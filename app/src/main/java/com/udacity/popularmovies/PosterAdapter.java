package com.udacity.popularmovies;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.Spinner;

import com.squareup.picasso.Picasso;

import org.json.JSONException;

import static android.content.ContentValues.TAG;

public class PosterAdapter extends RecyclerView.Adapter<PosterAdapter.PosterViewHolder> {
    private int mNumberItems;

    final private PosterItemClickListener mOnClickListener;

    String popular = "{\"page\":1,\"total_results\":19847,\"total_pages\":993,\"results\":[{\"vote_count\":136,\"id\":335983,\"video\":false,\"vote_average\":6.4,\"title\":\"Venom\",\"popularity\":324.891,\"poster_path\":\"\\/2uNW4WbgBXL25BAbXGLnLqX71Sw.jpg\",\"original_language\":\"en\",\"original_title\":\"Venom\",\"genre_ids\":[27,878,28,53],\"backdrop_path\":\"\\/VuukZLgaCrho2Ar8Scl9HtV3yD.jpg\",\"adult\":false,\"overview\":\"When Eddie Brock acquires the powers of a symbiote, he will have to release his alter-ego “Venom” to save his life.\",\"release_date\":\"2018-10-03\"},{\"vote_count\":2326,\"id\":363088,\"video\":false,\"vote_average\":6.9,\"title\":\"Ant-Man and the Wasp\",\"popularity\":195.01,\"poster_path\":\"\\/rv1AWImgx386ULjcf62VYaW8zSt.jpg\",\"original_language\":\"en\",\"original_title\":\"Ant-Man and the Wasp\",\"genre_ids\":[28,12,35,878,10751,10749],\"backdrop_path\":\"\\/6P3c80EOm7BodndGBUAJHHsHKrp.jpg\",\"adult\":false,\"overview\":\"Just when his time under house arrest is about to end, Scott Lang puts again his freedom at risk to help Hope van Dyne and Dr. Hank Pym dive into the quantum realm and try to accomplish, against time and any chance of success, a very dangerous rescue mission.\",\"release_date\":\"2018-07-04\"},{\"vote_count\":905,\"id\":439079,\"video\":false,\"vote_average\":5.9,\"title\":\"The Nun\",\"popularity\":139.636,\"poster_path\":\"\\/sFC1ElvoKGdHJIWRpNB3xWJ9lJA.jpg\",\"original_language\":\"en\",\"original_title\":\"The Nun\",\"genre_ids\":[27,9648,53],\"backdrop_path\":\"\\/fgsHxz21B27hOOqQBiw9L6yWcM7.jpg\",\"adult\":false,\"overview\":\"When a young nun at a cloistered abbey in Romania takes her own life, a priest with a haunted past and a novitiate on the threshold of her final vows are sent by the Vatican to investigate. Together they uncover the order’s unholy secret. Risking not only their lives but their faith and their very souls, they confront a malevolent force in the form of the same demonic nun that first terrorized audiences in “The Conjuring 2,” as the abbey becomes a horrific battleground between the living and the damned.\",\"release_date\":\"2018-09-05\"},{\"vote_count\":8483,\"id\":299536,\"video\":false,\"vote_average\":8.3,\"title\":\"Avengers: Infinity War\",\"popularity\":136.821,\"poster_path\":\"\\/7WsyChQLEftFiDOVTGkv3hFpyyt.jpg\",\"original_language\":\"en\",\"original_title\":\"Avengers: Infinity War\",\"genre_ids\":[12,878,28,14],\"backdrop_path\":\"\\/lmZFxXgJE3vgrciwuDib0N8CfQo.jpg\",\"adult\":false,\"overview\":\"As the Avengers and their allies have continued to protect the world from threats too large for any one hero to handle, a new danger has emerged from the cosmic shadows: Thanos. A despot of intergalactic infamy, his goal is to collect all six Infinity Stones, artifacts of unimaginable power, and use them to inflict his twisted will on all of reality. Everything the Avengers have fought for has led up to this moment - the fate of Earth and existence itself has never been more uncertain.\",\"release_date\":\"2018-04-25\"},{\"vote_count\":2008,\"id\":348350,\"video\":false,\"vote_average\":6.7,\"title\":\"Solo: A Star Wars Story\",\"popularity\":135.508,\"poster_path\":\"\\/3IGbjc5ZC5yxim5W0sFING2kdcz.jpg\",\"original_language\":\"en\",\"original_title\":\"Solo: A Star Wars Story\",\"genre_ids\":[28,12,878,80,37,10749],\"backdrop_path\":\"\\/96B1qMN9RxrAFu6uikwFhQ6N6J9.jpg\",\"adult\":false,\"overview\":\"Through a series of daring escapades deep within a dark and dangerous criminal underworld, Han Solo meets his mighty future copilot Chewbacca and encounters the notorious gambler Lando Calrissian.\",\"release_date\":\"2018-05-15\"},{\"vote_count\":37,\"id\":507569,\"video\":false,\"vote_average\":5.9,\"title\":\"The Seven Deadly Sins: Prisoners of the Sky\",\"popularity\":114.026,\"poster_path\":\"\\/r6pPUVUKU5eIpYj4oEzidk5ZibB.jpg\",\"original_language\":\"ja\",\"original_title\":\"The Seven Deadly Sins: Prisioneros del Cielo\",\"genre_ids\":[28,12,14,16],\"backdrop_path\":\"\\/uKwOX7MtKlAaGeCQe6c4jc1vZpj.jpg\",\"adult\":false,\"overview\":\"Traveling in search of the rare ingredient, “sky fish”  Meliodas and Hawk arrive at a palace that floats above the clouds. The people there are busy preparing a ceremony, meant to protect their home from a ferocious beast that awakens once every 3,000 years. But before the ritual is complete, the Six Knights of Black—a Demon Clan army—removes the seal on the beast, threatening the lives of everyone in the Sky Palace.\",\"release_date\":\"2018-08-18\"},{\"vote_count\":414,\"id\":346910,\"video\":false,\"vote_average\":5.3,\"title\":\"The Predator\",\"popularity\":104.848,\"poster_path\":\"\\/wMq9kQXTeQCHUZOG4fAe5cAxyUA.jpg\",\"original_language\":\"en\",\"original_title\":\"The Predator\",\"genre_ids\":[27,878,28,35],\"backdrop_path\":\"\\/f4E0ocYeToEuXvczZv6QArrMDJ.jpg\",\"adult\":false,\"overview\":\"From the outer reaches of space to the small-town streets of suburbia, the hunt comes home. Now, the universe’s most lethal hunters are stronger, smarter and deadlier than ever before, having genetically upgraded themselves with DNA from other species. When a young boy accidentally triggers their return to Earth, only a ragtag crew of ex-soldiers and a disgruntled science teacher can prevent the end of the human race.\",\"release_date\":\"2018-09-13\"},{\"vote_count\":3713,\"id\":351286,\"video\":false,\"vote_average\":6.5,\"title\":\"Jurassic World: Fallen Kingdom\",\"popularity\":103.537,\"poster_path\":\"\\/c9XxwwhPHdaImA2f1WEfEsbhaFB.jpg\",\"original_language\":\"en\",\"original_title\":\"Jurassic World: Fallen Kingdom\",\"genre_ids\":[28,12,878,27],\"backdrop_path\":\"\\/3s9O5af2xWKWR5JzP2iJZpZeQQg.jpg\",\"adult\":false,\"overview\":\"Three years after the demise of Jurassic World, a volcanic eruption threatens the remaining dinosaurs on the isla Nublar, so Claire Dearing, the former park manager, recruits Owen Grady to help prevent the extinction of the dinosaurs once again.\",\"release_date\":\"2018-06-06\"},{\"vote_count\":8377,\"id\":284054,\"video\":false,\"vote_average\":7.4,\"title\":\"Black Panther\",\"popularity\":99.884,\"poster_path\":\"\\/uxzzxijgPIY7slzFvMotPv8wjKA.jpg\",\"original_language\":\"en\",\"original_title\":\"Black Panther\",\"genre_ids\":[28,12,14,878],\"backdrop_path\":\"\\/b6ZJZHUdMEFECvGiDpJjlfUWela.jpg\",\"adult\":false,\"overview\":\"King T'Challa returns home from America to the reclusive, technologically advanced African nation of Wakanda to serve as his country's new leader. However, T'Challa soon finds that he is challenged for the throne by factions within his own country as well as without. Using powers reserved to Wakandan kings, T'Challa assumes the Black Panther mantel to join with girlfriend Nakia, the queen-mother, his princess-kid sister, members of the Dora Milaje (the Wakandan 'special forces') and an American secret agent, to prevent Wakanda from being dragged into a world war.\",\"release_date\":\"2018-02-13\"},{\"vote_count\":879,\"id\":447200,\"video\":false,\"vote_average\":6.1,\"title\":\"Skyscraper\",\"popularity\":83.881,\"poster_path\":\"\\/5LYSsOPzuP13201qSzMjNxi8FxN.jpg\",\"original_language\":\"en\",\"original_title\":\"Skyscraper\",\"genre_ids\":[28,53,18],\"backdrop_path\":\"\\/oMKFQmoVgB69fyXfSMu0lGlHJP2.jpg\",\"adult\":false,\"overview\":\"Framed and on the run, a former FBI agent must save his family from a blazing fire in the world's tallest building.\",\"release_date\":\"2018-07-11\"},{\"vote_count\":917,\"id\":442249,\"video\":false,\"vote_average\":5.9,\"title\":\"The First Purge\",\"popularity\":73.903,\"poster_path\":\"\\/litjsBoiydO6JlO70uOX4N3WnNL.jpg\",\"original_language\":\"en\",\"original_title\":\"The First Purge\",\"genre_ids\":[28,878,53,27],\"backdrop_path\":\"\\/r4clWIxKeWoqrHspQP0XunuUmB7.jpg\",\"adult\":false,\"overview\":\"To push the crime rate below one percent for the rest of the year, the New Founding Fathers of America test a sociological theory that vents aggression for one night in one isolated community. But when the violence of oppressors meets the rage of the others, the contagion will explode from the trial-city borders and spread across the nation.\",\"release_date\":\"2018-07-04\"},{\"vote_count\":704,\"id\":400155,\"video\":false,\"vote_average\":6.9,\"title\":\"Hotel Transylvania 3: Summer Vacation\",\"popularity\":73.731,\"poster_path\":\"\\/gjAFM4xhA5vyLxxKMz38ujlUfDL.jpg\",\"original_language\":\"en\",\"original_title\":\"Hotel Transylvania 3: Summer Vacation\",\"genre_ids\":[10751,14,35,16],\"backdrop_path\":\"\\/m03jul0YdVEOFXEQVUv6pOVQYGL.jpg\",\"adult\":false,\"overview\":\"Dracula, Mavis, Johnny and the rest of the Drac Pack take a vacation on a luxury Monster Cruise Ship, where Dracula falls in love with the ship’s captain, Ericka, who’s secretly a descendant of Abraham Van Helsing, the notorious monster slayer.\",\"release_date\":\"2018-06-28\"},{\"vote_count\":5349,\"id\":383498,\"video\":false,\"vote_average\":7.5,\"title\":\"Deadpool 2\",\"popularity\":71.25,\"poster_path\":\"\\/to0spRl1CMDvyUbOnbb4fTk3VAd.jpg\",\"original_language\":\"en\",\"original_title\":\"Deadpool 2\",\"genre_ids\":[28,35,878],\"backdrop_path\":\"\\/3P52oz9HPQWxcwHOwxtyrVV1LKi.jpg\",\"adult\":false,\"overview\":\"Wisecracking mercenary Deadpool battles the evil and powerful Cable and other bad guys to save a boy's life.\",\"release_date\":\"2018-05-15\"},{\"vote_count\":1756,\"id\":353081,\"video\":false,\"vote_average\":7.3,\"title\":\"Mission: Impossible - Fallout\",\"popularity\":63.312,\"poster_path\":\"\\/AkJQpZp9WoNdj7pLYSj1L0RcMMN.jpg\",\"original_language\":\"en\",\"original_title\":\"Mission: Impossible - Fallout\",\"genre_ids\":[12,28,53],\"backdrop_path\":\"\\/a9fRqsl6P27qxbDSb4pBXNv9Fwl.jpg\",\"adult\":false,\"overview\":\"When an IMF mission ends badly, the world is faced with dire consequences. As Ethan Hunt takes it upon himself to fulfill his original briefing, the CIA begin to question his loyalty and his motives. The IMF team find themselves in a race against time, hunted by assassins while trying to prevent a global catastrophe.\",\"release_date\":\"2018-07-13\"},{\"vote_count\":9401,\"id\":102899,\"video\":false,\"vote_average\":7.1,\"title\":\"Ant-Man\",\"popularity\":62.717,\"poster_path\":\"\\/D6e8RJf2qUstnfkTslTXNTUAlT.jpg\",\"original_language\":\"en\",\"original_title\":\"Ant-Man\",\"genre_ids\":[878,28,12],\"backdrop_path\":\"\\/kvXLZqY0Ngl1XSw7EaMQO0C1CCj.jpg\",\"adult\":false,\"overview\":\"Armed with the astonishing ability to shrink in scale but increase in strength, master thief Scott Lang must embrace his inner-hero and help his mentor, Doctor Hank Pym, protect the secret behind his spectacular Ant-Man suit from a new generation of towering threats. Against seemingly insurmountable obstacles, Pym and Lang must plan and pull off a heist that will save the world.\",\"release_date\":\"2015-07-14\"},{\"vote_count\":471,\"id\":400535,\"video\":false,\"vote_average\":6.7,\"title\":\"Sicario: Day of the Soldado\",\"popularity\":58.846,\"poster_path\":\"\\/msqWSQkU403cQKjQHnWLnugv7EY.jpg\",\"original_language\":\"en\",\"original_title\":\"Sicario: Day of the Soldado\",\"genre_ids\":[28,80,18,53],\"backdrop_path\":\"\\/tnwMCH4yLBY4qpe6Nr4n66u4U3f.jpg\",\"adult\":false,\"overview\":\"Agent Matt Graver teams up with operative Alejandro Gillick to prevent Mexican drug cartels from smuggling terrorists across the United States border.\",\"release_date\":\"2018-06-27\"},{\"vote_count\":66,\"id\":332562,\"video\":false,\"vote_average\":6.5,\"title\":\"A Star Is Born\",\"popularity\":54.27,\"poster_path\":\"\\/wrFpXMNBRj2PBiN4Z5kix51XaIZ.jpg\",\"original_language\":\"en\",\"original_title\":\"A Star Is Born\",\"genre_ids\":[18,10402,10749],\"backdrop_path\":\"\\/840rbblaLc4SVxm8gF3DNdJ0YAE.jpg\",\"adult\":false,\"overview\":\"Seasoned musician Jackson Maine discovers—and falls in love with—struggling artist Ally. She has just about given up on her dream to make it big as a singer—until Jack coaxes her into the spotlight. But even as Ally's career takes off, the personal side of their relationship is breaking down, as Jack fights an ongoing battle with his own internal demons.\",\"release_date\":\"2018-10-03\"},{\"vote_count\":2,\"id\":516710,\"video\":false,\"vote_average\":7.5,\"title\":\"Assalamualaikum Calon Imam\",\"popularity\":53.95,\"poster_path\":\"\\/mKZp2wJzNKMYfDo9e21Dpw0MTmi.jpg\",\"original_language\":\"id\",\"original_title\":\"Assalamualaikum Calon Imam\",\"genre_ids\":[18],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"2018-06-07\"},{\"vote_count\":8492,\"id\":284053,\"video\":false,\"vote_average\":7.5,\"title\":\"Thor: Ragnarok\",\"popularity\":51.504,\"poster_path\":\"\\/rzRwTcFvttcN1ZpX2xv4j3tSdJu.jpg\",\"original_language\":\"en\",\"original_title\":\"Thor: Ragnarok\",\"genre_ids\":[28,12,35,14,878],\"backdrop_path\":\"\\/kaIfm5ryEOwYg8mLbq8HkPuM1Fo.jpg\",\"adult\":false,\"overview\":\"Thor is on the other side of the universe and finds himself in a race against time to get back to Asgard to stop Ragnarok, the prophecy of destruction to his homeworld and the end of Asgardian civilization, at the hands of an all-powerful new threat, the ruthless Hela.\",\"release_date\":\"2017-10-25\"},{\"vote_count\":6806,\"id\":181808,\"video\":false,\"vote_average\":7.1,\"title\":\"Star Wars: The Last Jedi\",\"popularity\":51.345,\"poster_path\":\"\\/kOVEVeg59E0wsnXmF9nrh6OmWII.jpg\",\"original_language\":\"en\",\"original_title\":\"Star Wars: The Last Jedi\",\"genre_ids\":[14,12,878,28],\"backdrop_path\":\"\\/5Iw7zQTHVRBOYpA0V6z0yypOPZh.jpg\",\"adult\":false,\"overview\":\"Rey develops her newly discovered abilities with the guidance of Luke Skywalker, who is unsettled by the strength of her powers. Meanwhile, the Resistance prepares to do battle with the First Order.\",\"release_date\":\"2017-12-13\"}]}";

    String topRated ="{\"page\":1,\"total_results\":6291,\"total_pages\":315,\"results\":[{\"vote_count\":1889,\"id\":19404,\"video\":false,\"vote_average\":9.2,\"title\":\"Dilwale Dulhania Le Jayenge\",\"popularity\":13.54,\"poster_path\":\"\\/uC6TTUhPpQCmgldGyYveKRAu8JN.jpg\",\"original_language\":\"hi\",\"original_title\":\"दिलवाले दुल्हनिया ले जायेंगे\",\"genre_ids\":[35,18,10749],\"backdrop_path\":\"\\/nl79FQ8xWZkhL3rDr1v2RFFR6J0.jpg\",\"adult\":false,\"overview\":\"Raj is a rich, carefree, happy-go-lucky second generation NRI. Simran is the daughter of Chaudhary Baldev Singh, who in spite of being an NRI is very strict about adherence to Indian values. Simran has left for India to be married to her childhood fiancé. Raj leaves for India with a mission at his hands, to claim his lady love under the noses of her whole family. Thus begins a saga.\",\"release_date\":\"1995-10-20\"},{\"vote_count\":11126,\"id\":278,\"video\":false,\"vote_average\":8.6,\"title\":\"The Shawshank Redemption\",\"popularity\":25.45,\"poster_path\":\"\\/9O7gLzmreU0nGkIB6K3BsJbzvNv.jpg\",\"original_language\":\"en\",\"original_title\":\"The Shawshank Redemption\",\"genre_ids\":[18,80],\"backdrop_path\":\"\\/j9XKiZrVeViAixVRzCta7h1VU9W.jpg\",\"adult\":false,\"overview\":\"Framed in the 1940s for the double murder of his wife and her lover, upstanding banker Andy Dufresne begins a new life at the Shawshank prison, where he puts his accounting skills to work for an amoral warden. During his long stretch in prison, Dufresne comes to be admired by the other inmates -- including an older prisoner named Red -- for his integrity and unquenchable sense of hope.\",\"release_date\":\"1994-09-23\"},{\"vote_count\":8502,\"id\":238,\"video\":false,\"vote_average\":8.6,\"title\":\"The Godfather\",\"popularity\":20.74,\"poster_path\":\"\\/rPdtLWNsZmAtoZl9PK7S2wE3qiS.jpg\",\"original_language\":\"en\",\"original_title\":\"The Godfather\",\"genre_ids\":[18,80],\"backdrop_path\":\"\\/6xKCYgH16UuwEGAyroLU6p8HLIn.jpg\",\"adult\":false,\"overview\":\"Spanning the years 1945 to 1955, a chronicle of the fictional Italian-American Corleone crime family. When organized crime family patriarch, Vito Corleone barely survives an attempt on his life, his youngest son, Michael steps in to take care of the would-be killers, launching a campaign of bloody revenge.\",\"release_date\":\"1972-03-14\"},{\"vote_count\":2946,\"id\":372058,\"video\":false,\"vote_average\":8.6,\"title\":\"Your Name.\",\"popularity\":21.355,\"poster_path\":\"\\/xq1Ugd62d23K2knRUx6xxuALTZB.jpg\",\"original_language\":\"ja\",\"original_title\":\"君の名は。\",\"genre_ids\":[10749,16,18],\"backdrop_path\":\"\\/6vkhRvsRvWpmaRVyCXaxTkIEb7j.jpg\",\"adult\":false,\"overview\":\"High schoolers Mitsuha and Taki are complete strangers living separate lives. But one night, they suddenly switch places. Mitsuha wakes up in Taki’s body, and he in hers. This bizarre occurrence continues to happen randomly, and the two must adjust their lives around each other.\",\"release_date\":\"2016-08-26\"},{\"vote_count\":6512,\"id\":424,\"video\":false,\"vote_average\":8.5,\"title\":\"Schindler's List\",\"popularity\":17,\"poster_path\":\"\\/yPisjyLweCl1tbgwgtzBCNCBle.jpg\",\"original_language\":\"en\",\"original_title\":\"Schindler's List\",\"genre_ids\":[18,36,10752],\"backdrop_path\":\"\\/cTNYRUTXkBgPH3wP3kmPUB5U6dA.jpg\",\"adult\":false,\"overview\":\"The true story of how businessman Oskar Schindler saved over a thousand Jewish lives from the Nazis while they worked as slaves in his factory during World War II.\",\"release_date\":\"1993-12-15\"},{\"vote_count\":4931,\"id\":240,\"video\":false,\"vote_average\":8.5,\"title\":\"The Godfather: Part II\",\"popularity\":10.911,\"poster_path\":\"\\/bVq65huQ8vHDd1a4Z37QtuyEvpA.jpg\",\"original_language\":\"en\",\"original_title\":\"The Godfather: Part II\",\"genre_ids\":[18,80],\"backdrop_path\":\"\\/gLbBRyS7MBrmVUNce91Hmx9vzqI.jpg\",\"adult\":false,\"overview\":\"In the continuing saga of the Corleone crime family, a young Vito Corleone grows up in Sicily and in 1910s New York. In the 1950s, Michael Corleone attempts to expand the family business into Las Vegas, Hollywood and Cuba.\",\"release_date\":\"1974-12-20\"},{\"vote_count\":6026,\"id\":129,\"video\":false,\"vote_average\":8.5,\"title\":\"Spirited Away\",\"popularity\":17.827,\"poster_path\":\"\\/dL11DBPcRhWWnJcFXl9A07MrqTI.jpg\",\"original_language\":\"ja\",\"original_title\":\"千と千尋の神隠し\",\"genre_ids\":[16,10751,14],\"backdrop_path\":\"\\/djgM2d3e42p9GFQObg6lwK2SVw2.jpg\",\"adult\":false,\"overview\":\"A young girl, Chihiro, becomes trapped in a strange new world of spirits. When her parents undergo a mysterious transformation, she must call upon the courage she never knew she had to free her family.\",\"release_date\":\"2001-07-20\"},{\"vote_count\":5901,\"id\":637,\"video\":false,\"vote_average\":8.4,\"title\":\"Life Is Beautiful\",\"popularity\":14.967,\"poster_path\":\"\\/f7DImXDebOs148U4uPjI61iDvaK.jpg\",\"original_language\":\"it\",\"original_title\":\"La vita è bella\",\"genre_ids\":[35,18],\"backdrop_path\":\"\\/bORe0eI72D874TMawOOFvqWS6Xe.jpg\",\"adult\":false,\"overview\":\"A touching story of an Italian book seller of Jewish ancestry who lives in his own little fairy tale. His creative and happy life would come to an abrupt halt when his entire family is deported to a concentration camp during World War II. While locked up he tries to convince his son that the whole thing is just a game.\",\"release_date\":\"1997-12-20\"},{\"vote_count\":6572,\"id\":497,\"video\":false,\"vote_average\":8.4,\"title\":\"The Green Mile\",\"popularity\":20.491,\"poster_path\":\"\\/sOHqdY1RnSn6kcfAHKu28jvTebE.jpg\",\"original_language\":\"en\",\"original_title\":\"The Green Mile\",\"genre_ids\":[14,18,80],\"backdrop_path\":\"\\/Rlt20sEbOQKPVjia7lUilFm49W.jpg\",\"adult\":false,\"overview\":\"A supernatural tale set on death row in a Southern prison, where gentle giant John Coffey possesses the mysterious power to heal people's ailments. When the cell block's head guard, Paul Edgecomb, recognizes Coffey's miraculous gift, he tries desperately to help stave off the condemned man's execution.\",\"release_date\":\"1999-12-10\"},{\"vote_count\":12693,\"id\":680,\"video\":false,\"vote_average\":8.4,\"title\":\"Pulp Fiction\",\"popularity\":23.625,\"poster_path\":\"\\/dM2w364MScsjFf8pfMbaWUcWrR.jpg\",\"original_language\":\"en\",\"original_title\":\"Pulp Fiction\",\"genre_ids\":[53,80],\"backdrop_path\":\"\\/4cDFJr4HnXN5AdPw4AKrmLlMWdO.jpg\",\"adult\":false,\"overview\":\"A burger-loving hit man, his philosophical partner, a drug-addled gangster's moll and a washed-up boxer converge in this sprawling, comedic crime caper. Their adventures unfurl in three stories that ingeniously trip back and forth in time.\",\"release_date\":\"1994-09-10\"},{\"vote_count\":3934,\"id\":539,\"video\":false,\"vote_average\":8.4,\"title\":\"Psycho\",\"popularity\":13.168,\"poster_path\":\"\\/81d8oyEFgj7FlxJqSDXWr8JH8kV.jpg\",\"original_language\":\"en\",\"original_title\":\"Psycho\",\"genre_ids\":[18,27,53],\"backdrop_path\":\"\\/3md49VBCeqY6MSNyAVY6d5eC6bA.jpg\",\"adult\":false,\"overview\":\"When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fine… until Marion decides to take a shower.\",\"release_date\":\"1960-06-16\"},{\"vote_count\":16317,\"id\":155,\"video\":false,\"vote_average\":8.4,\"title\":\"The Dark Knight\",\"popularity\":26.275,\"poster_path\":\"\\/1hRoyzDtpgMU7Dz4JF22RANzQO7.jpg\",\"original_language\":\"en\",\"original_title\":\"The Dark Knight\",\"genre_ids\":[18,28,80,53],\"backdrop_path\":\"\\/hqkIcbrOHL86UncnHIsHVcVmzue.jpg\",\"adult\":false,\"overview\":\"Batman raises the stakes in his war on crime. With the help of Lt. Jim Gordon and District Attorney Harvey Dent, Batman sets out to dismantle the remaining criminal organizations that plague the streets. The partnership proves to be effective, but they soon find themselves prey to a reign of chaos unleashed by a rising criminal mastermind known to the terrified citizens of Gotham as the Joker.\",\"release_date\":\"2008-07-16\"},{\"vote_count\":13811,\"id\":550,\"video\":false,\"vote_average\":8.4,\"title\":\"Fight Club\",\"popularity\":24.294,\"poster_path\":\"\\/adw6Lq9FiC9zjYEpOqfq03ituwp.jpg\",\"original_language\":\"en\",\"original_title\":\"Fight Club\",\"genre_ids\":[18],\"backdrop_path\":\"\\/87hTDiay2N2qWyX4Ds7ybXi9h8I.jpg\",\"adult\":false,\"overview\":\"A ticking-time-bomb insomniac and a slippery soap salesman channel primal male aggression into a shocking new form of therapy. Their concept catches on, with underground \\\"fight clubs\\\" forming in every town, until an eccentric gets in the way and ignites an out-of-control spiral toward oblivion.\",\"release_date\":\"1999-10-15\"},{\"vote_count\":1802,\"id\":311,\"video\":false,\"vote_average\":8.4,\"title\":\"Once Upon a Time in America\",\"popularity\":14.53,\"poster_path\":\"\\/fqP3Q7DWMFqW7mh11hWXbNwN9rz.jpg\",\"original_language\":\"en\",\"original_title\":\"Once Upon a Time in America\",\"genre_ids\":[18,80],\"backdrop_path\":\"\\/vnT6HzjLSDrAweHn9xWykb8Ii6T.jpg\",\"adult\":false,\"overview\":\"A former Prohibition-era Jewish gangster returns to the Lower East Side of Manhattan over thirty years later, where he once again must confront the ghosts and regrets of his old life.\",\"release_date\":\"1984-05-23\"},{\"vote_count\":12107,\"id\":13,\"video\":false,\"vote_average\":8.4,\"title\":\"Forrest Gump\",\"popularity\":24.277,\"poster_path\":\"\\/yE5d3BUhE8hCnkMUJOo1QDoOGNz.jpg\",\"original_language\":\"en\",\"original_title\":\"Forrest Gump\",\"genre_ids\":[35,18,10749],\"backdrop_path\":\"\\/7c9UVPPiTPltouxRVY6N9uugaVA.jpg\",\"adult\":false,\"overview\":\"A man with a low IQ has accomplished great things in his life and been present during significant historic events—in each case, far exceeding what anyone imagined he could do. But despite all he has achieved, his one true love eludes him.\",\"release_date\":\"1994-07-06\"},{\"vote_count\":3073,\"id\":389,\"video\":false,\"vote_average\":8.4,\"title\":\"12 Angry Men\",\"popularity\":11.989,\"poster_path\":\"\\/3W0v956XxSG5xgm7LB6qu8ExYJ2.jpg\",\"original_language\":\"en\",\"original_title\":\"12 Angry Men\",\"genre_ids\":[18],\"backdrop_path\":\"\\/lH2Ga8OzjU1XlxJ73shOlPx6cRw.jpg\",\"adult\":false,\"overview\":\"The defense and the prosecution have rested and the jury is filing into the jury room to decide if a young Spanish-American is guilty or innocent of murdering his father. What begins as an open and shut case soon becomes a mini-drama of each of the jurors' prejudices and preconceptions about the trial, the accused, and each other.\",\"release_date\":\"1957-03-25\"},{\"vote_count\":6514,\"id\":244786,\"video\":false,\"vote_average\":8.4,\"title\":\"Whiplash\",\"popularity\":23.401,\"poster_path\":\"\\/lIv1QinFqz4dlp5U4lQ6HaiskOZ.jpg\",\"original_language\":\"en\",\"original_title\":\"Whiplash\",\"genre_ids\":[18],\"backdrop_path\":\"\\/6bbZ6XyvgfjhQwbplnUh1LSj1ky.jpg\",\"adult\":false,\"overview\":\"Under the direction of a ruthless instructor, a talented young drummer begins to pursue perfection at any cost, even his humanity.\",\"release_date\":\"2014-10-10\"},{\"vote_count\":4683,\"id\":769,\"video\":false,\"vote_average\":8.4,\"title\":\"GoodFellas\",\"popularity\":13.642,\"poster_path\":\"\\/hAPeXBdGDGmXRPj4OZZ0poH65Iu.jpg\",\"original_language\":\"en\",\"original_title\":\"GoodFellas\",\"genre_ids\":[18,80],\"backdrop_path\":\"\\/sw7mordbZxgITU877yTpZCud90M.jpg\",\"adult\":false,\"overview\":\"The true story of Henry Hill, a half-Irish, half-Sicilian Brooklyn kid who is adopted by neighbourhood gangsters at an early age and climbs the ranks of a Mafia family under the guidance of Jimmy Conway.\",\"release_date\":\"1990-09-12\"},{\"vote_count\":4556,\"id\":510,\"video\":false,\"vote_average\":8.4,\"title\":\"One Flew Over the Cuckoo's Nest\",\"popularity\":17.878,\"poster_path\":\"\\/2Sns5oMb356JNdBHgBETjIpRYy9.jpg\",\"original_language\":\"en\",\"original_title\":\"One Flew Over the Cuckoo's Nest\",\"genre_ids\":[18],\"backdrop_path\":\"\\/4E7YQcwui0PfNXguf4V2X8YocPC.jpg\",\"adult\":false,\"overview\":\"While serving time for insanity at a state mental hospital, implacable rabble-rouser, Randle Patrick McMurphy inspires his fellow patients to rebel against the authoritarian rule of head nurse, Mildred Ratched.\",\"release_date\":\"1975-11-18\"},{\"vote_count\":240,\"id\":18491,\"video\":false,\"vote_average\":8.4,\"title\":\"Neon Genesis Evangelion: The End of Evangelion\",\"popularity\":7.1,\"poster_path\":\"\\/5JYzfyKBwReaQ41WFhqXgOZnPWV.jpg\",\"original_language\":\"ja\",\"original_title\":\"新世紀エヴァンゲリオン劇場版 THE END OF EVANGELION\",\"genre_ids\":[18,878,16],\"backdrop_path\":\"\\/zCsHUIws5dy7xbwTntRnOQqaMTh.jpg\",\"adult\":false,\"overview\":\"The second of two theatrically released follow-ups to the Neon Genesis Evangelion series. Comprising of two alternate episodes which were first intended to take the place of episodes 25 and 26, this finale answers many of the questions surrounding the series, while also opening up some new possibilities.\",\"release_date\":\"1997-07-19\"}]}";

    private String json = topRated;
    private String[] posters = JsonUtils.getPoster(json);
    // String[] address = {"https://scontent-dfw5-2.xx.fbcdn.net/v/t31.0-8/21427310_10210605307356571_2524072672159646116_o.jpg?_nc_cat=110&oh=c45c1b78f877829bcf42789c750f10b4&oe=5C4E0247",
    //        "http://image.tmdb.org/t/p/w185//3IGbjc5ZC5yxim5W0sFING2kdcz.jpg"};

    public interface PosterItemClickListener{
        void onListItemClicked(int clickedItemIndex);
    }

    public PosterAdapter(int numberOfItems, PosterItemClickListener listener)
    {
        mNumberItems = numberOfItems;
        mOnClickListener = listener;
    }

    /*
    public PosterAdapter(int numberOfItems , String criteria )
    {
        mNumberItems = numberOfItems;
        if (criteria.equals("Most Popular"))
            json = popular;
        else if (criteria.equals("Top Rated"))
            json = topRated;
        else
            json = popular;
        posters = JsonUtils.getPoster(json);

    }
    */

    @Override
    public PosterViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType)
    {
        Context context = viewGroup.getContext();
        int layoutIdForItem = R.layout.poster_grid_item;
        LayoutInflater inflater = LayoutInflater.from(context);
        boolean shouldAttachToParentImmediately = false;

        View view = inflater.inflate(layoutIdForItem, viewGroup, shouldAttachToParentImmediately);
        PosterViewHolder viewHolder = new PosterViewHolder(view);
        return viewHolder;
    }

    @Override
    public void onBindViewHolder(PosterViewHolder holder, int number)
    {
        Log.d(TAG, " " + number + " " + posters[number]);
        holder.bind(posters[number]);
    }

    @Override
    public int getItemCount() { return mNumberItems; }

    public void selectCriteria(String option)
    {
        if (option.equals("Top Rated"))
            json = topRated;
        if (option.equals("Most Popular"))
            json = popular;
        notifyDataSetChanged();
        posters = JsonUtils.getPoster(json);
    }

    class PosterViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener
    {
        ImageView gridItemPosterView;

        public PosterViewHolder(View itemView)
        {
            super(itemView);
            gridItemPosterView = (ImageView) itemView.findViewById(R.id.poster_image);
            itemView.setOnClickListener(this);
        }


        void bind(String imageAddress) {
            Picasso.get().load(imageAddress).into(gridItemPosterView);

            /*
            int picture = R.drawable.peanut_day;
            gridItemPosterView.setImageResource(picture);
            */
        }

        @Override
        public void onClick(View v)
        {
            int clickedPosition = getAdapterPosition();
            mOnClickListener.onListItemClicked(clickedPosition);
        }
    }
}
